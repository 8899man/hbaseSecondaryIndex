<!DOCTYPE html>
<html >
<meta charset='utf-8'>
<head>
</head>
<body>
<h1>hbase_secondary_index说明</h1>
<hr />
hbase_secondary_index是一个hbase二级索引的实现，基于solr+hbase coprocessor框架为hbase提供索引表支持。<br>
此工程可打包为一个hbase的插件，通用方便。<br><br>

这篇文档的目的是为了向您介绍hbase_secondary_index的基本使用，使得您可以使用它来弥补hbase无内建二级索引支持的问题。

<br>
<h2>打包工程</h2>
<hr />
该工程使用maven来构建，因此使用"mvn package"即可完成打包。

<br>
<h2>部署jar包</h2>
<hr />
将jar包放到hbase各个节点的/HBEE_HOME/lib/下，放置后需要重启hbase。

<br>
<h2>创建hbase索引表</h2>
<hr />
示例：<br>
create 'index_demo','fm1' <br><br>

disable 'index_demo' <br><br>

alter 'index_demo', METHOD=>'table_att', 'coprocessor'=>'file:${HBASE_HOME}/lib/hbase_second_indexer-0.0.1-SNAPSHOT.jar|com.syx.hbase.SecondaryIndexer|1073741823' <br><br>

alter 'index_demo', METHOD=>'table_att', CONFIG=>{'solr_server_url'=>'http://${ip}:${port}/solr', 'max_add_documents_count'=>'100', 'auto_add_commit_documents_interval'=>'60000', 'isIndexTable'=>'true', 'rowkeyColumns'=>'column1,column2,column3', 'rowkeySplitor'=>'&', 'indexColumns'=>'column4,column5,column6,column7,column8', 'solrCollection'=>'index_demo_collection'} <br><br>

enable 'index_demo' 

<br>
<h2>索引表查询</h2>
<hr />
先查询solr索引，得到rowkey——>再查询hbase得到记录
</body>
</html>